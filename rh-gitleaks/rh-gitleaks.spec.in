Name: rh-gitleaks
Summary: scan git commits for leaks
Version: %{version}
Release: 1
License: MIT
Url: https://gitlab.corp.redhat.com/infosec-public/developer-workbench/tools
Source0: %{name}-%{version}.tar.gz

BuildArch: noarch

BuildRequires: python3
BuildRequires: python3-hatchling
BuildRequires: python3-pip
BuildRequires: pyproject-rpm-macros

Requires: python3-requests python3-jwt

%description
Frontend on gitleaks tool for scanning code commits

%prep
%setup

%build
%pyproject_wheel

%install
%pyproject_install

%check
make test

%files
%{_bindir}/rh-gitleaks
%{_bindir}/rh-gitleaks-gh-account
%{_bindir}/rh-gitleaks-gl-account
%{python3_sitelib}/rh_gitleaks-*.dist-info/
%{python3_sitelib}/rh_gitleaks/

%changelog
* Wed Nov 15 2023 Daniel P. Berrang√© <berrange@redhat.com> - 2.1.0-1
- Initial package + misc tweaks by bplaxco

Name: rh_gitleaks
Summary: scan git commits for leaks
Version: @VERSION@
Release: 1
License: MIT
Url: https://gitlab.corp.redhat.com/infosec-public/developer-workbench/tools
Source0: %{name}-%{version}.tar.gz

BuildArch: noarch

BuildRequires: python3
BuildRequires: python3-hatchling
BuildRequires: python3-jwt
BuildRequires: python3-pip
BuildRequires: python3-pytest
BuildRequires: python3-requests
BuildRequires: pyproject-rpm-macros

Requires: gitleaks7

%description
Frontend on gitleaks tool for scanning code commits

%prep
%setup

%build
%pyproject_wheel

%install
%pyproject_install

%check
%pytest

%files
%{_bindir}/rh-gitleaks
%{_bindir}/rh-gitleaks-gh-account
%{_bindir}/rh-gitleaks-gl-account
%{python3_sitelib}/%{name}-*.dist-info/
%{python3_sitelib}/rh_gitleaks/

%changelog
* Wed Nov 15 2023 Daniel P. Berrang√© <berrange@redhat.com> - 2.1.0-1
- Initial package

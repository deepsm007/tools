#! /bin/bash
set -euo pipefail

#
# Checks
#

function check-secrets {
  if [[ -f .gitleaks.toml ]]
  then
    additional_config="--additional-config=.gitleaks.toml"
  else
    additional_config=""
  fi

  rh-gitleaks "${additional_config}" --verbose --redact --format=json --path=.
}

#
# Run Checks
#

check-secrets
